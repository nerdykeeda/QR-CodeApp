<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VCard QR Generator - Digital Visiting Card</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcode/1.5.3/qrcode.min.js"></script>
    <style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    min-height: 100vh;
    color: #333;
}

.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
}

.header {
    text-align: center;
    color: white;
    margin-bottom: 40px;
}

.header h1 {
    font-size: 2.5rem;
    margin-bottom: 10px;
    font-weight: 700;
}

.header h1 i {
    margin-right: 15px;
    color: #ffd700;
}

.header p {
    font-size: 1.2rem;
    opacity: 0.9;
}

.main-content {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 40px;
    align-items: start;
}

.form-section {
    background: white;
    padding: 30px;
    border-radius: 20px;
    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
    backdrop-filter: blur(10px);
}

.form-section h2 {
    color: #4a5568;
    margin-bottom: 25px;
    font-size: 1.8rem;
    font-weight: 600;
}

.form-section h3 {
    color: #4a5568;
    margin: 30px 0 20px 0;
    font-size: 1.3rem;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 10px;
}

.vcard-form {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
}

.form-group {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.form-group label {
    font-weight: 600;
    color: #4a5568;
    font-size: 0.9rem;
    display: flex;
    align-items: center;
    gap: 8px;
}

.form-group input,
.form-group textarea {
    padding: 12px 15px;
    border: 2px solid #e2e8f0;
    border-radius: 10px;
    font-size: 1rem;
    transition: all 0.3s ease;
    background: #f8fafc;
}

.form-group input:focus,
.form-group textarea:focus {
    outline: none;
    border-color: #667eea;
    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    background: white;
}

.form-group textarea {
    resize: vertical;
    min-height: 80px;
}

.profile-upload .upload-area {
    border: 3px dashed #cbd5e0;
    border-radius: 15px;
    padding: 30px;
    text-align: center;
    cursor: pointer;
    transition: all 0.3s ease;
    background: #f8fafc;
    position: relative;
    min-height: 200px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.profile-upload .upload-area:hover {
    border-color: #667eea;
    background: #f0f4ff;
}

.upload-placeholder {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 10px;
    color: #718096;
}

.upload-placeholder i {
    font-size: 3rem;
    color: #a0aec0;
}

.upload-placeholder p {
    font-weight: 600;
    font-size: 1.1rem;
}

.upload-placeholder span {
    font-size: 0.9rem;
    opacity: 0.8;
}

.profile-preview {
    max-width: 100%;
    max-height: 200px;
    border-radius: 10px;
    object-fit: cover;
}

.generate-btn {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border: none;
    padding: 15px 30px;
    border-radius: 12px;
    font-size: 1.1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    margin-top: 20px;
}

.generate-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
}

.generate-btn:active {
    transform: translateY(0);
}

.preview-section {
    display: flex;
    flex-direction: column;
    gap: 30px;
}

.card-preview {
    background: white;
    padding: 30px;
    border-radius: 20px;
    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
    min-height: 300px;
}

.card-preview h3 {
    color: #4a5568;
    margin-bottom: 20px;
    font-size: 1.5rem;
}

.card-display {
    background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
    border: 1px solid #e2e8f0;
    border-radius: 15px;
    padding: 25px;
    margin-top: 15px;
}

.card-header {
    display: flex;
    align-items: center;
    gap: 20px;
    margin-bottom: 20px;
}

.card-avatar {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    object-fit: cover;
    border: 3px solid #667eea;
}

.card-info h4 {
    font-size: 1.3rem;
    color: #2d3748;
    margin-bottom: 5px;
}

.card-info p {
    color: #718096;
    font-size: 0.9rem;
}

.card-details {
    display: grid;
    gap: 10px;
}

.card-detail-item {
    display: flex;
    align-items: center;
    gap: 10px;
    color: #4a5568;
    font-size: 0.9rem;
}

.card-detail-item i {
    width: 16px;
    color: #667eea;
}

.social-links {
    display: flex;
    gap: 15px;
    margin-top: 15px;
    flex-wrap: wrap;
}

.social-link {
    width: 35px;
    height: 35px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    text-decoration: none;
    font-size: 1.1rem;
    transition: transform 0.2s ease;
}

.social-link:hover {
    transform: scale(1.1);
}

.social-link.linkedin { background: #0077b5; }
.social-link.twitter { background: #1da1f2; }
.social-link.facebook { background: #1877f2; }
.social-link.instagram { background: #e4405f; }
.social-link.github { background: #333; }
.social-link.youtube { background: #ff0000; }

.qr-section {
    background: white;
    padding: 30px;
    border-radius: 20px;
    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
    text-align: center;
}

.qr-section h3 {
    color: #4a5568;
    margin-bottom: 25px;
    font-size: 1.5rem;
}

.qr-container {
    background: #f8fafc;
    padding: 20px;
    border-radius: 15px;
    display: inline-block;
    margin-bottom: 25px;
}

.qr-actions {
    display: flex;
    gap: 15px;
    justify-content: center;
    flex-wrap: wrap;
}

.download-btn {
    background: #48bb78;
    color: white;
    border: none;
    padding: 12px 25px;
    border-radius: 10px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 0.9rem;
}

.download-btn:hover {
    background: #38a169;
    transform: translateY(-2px);
}

.download-btn.secondary {
    background: #667eea;
}

.download-btn.secondary:hover {
    background: #5a67d8;
}

@media (max-width: 768px) {
    .main-content {
        grid-template-columns: 1fr;
        gap: 30px;
    }
    
    .form-row {
        grid-template-columns: 1fr;
        gap: 15px;
    }
    
    .header h1 {
        font-size: 2rem;
    }
    
    .form-section,
    .card-preview,
    .qr-section {
        padding: 20px;
    }
    
    .qr-actions {
        flex-direction: column;
        align-items: stretch;
    }
    
    .social-links {
        justify-content: center;
    }
}

@media (max-width: 480px) {
    .container {
        padding: 15px;
    }
    
    .header h1 {
        font-size: 1.8rem;
    }
    
    .header p {
        font-size: 1rem;
    }
    
    .card-header {
        flex-direction: column;
        text-align: center;
    }
}

.form-group input:invalid:not(:placeholder-shown) {
    border-color: #f56565;
    background: #fed7d7;
}

.form-group input:valid:not(:placeholder-shown) {
    border-color: #48bb78;
    background: #c6f6d5;
}

.loading {
    display: inline-block;
    width: 20px;
    height: 20px;
    border: 3px solid #f3f3f3;
    border-top: 3px solid #667eea;
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1><i class="fas fa-qrcode"></i> VCard QR Generator</h1>
            <p>Create your digital visiting card with QR code</p>
        </header>

        <div class="main-content">
            <div class="form-section">
                <h2>Personal Information</h2>
                <form id="vcardForm" class="vcard-form">
                    <div class="form-group profile-upload">
                        <label for="profilePicture">Profile Picture</label>
                        <div class="upload-area" id="uploadArea">
                            <div class="upload-placeholder">
                                <i class="fas fa-camera"></i>
                                <p>Click to upload profile picture</p>
                                <span>JPG, PNG, GIF up to 5MB</span>
                            </div>
                            <img id="profilePreview" class="profile-preview" style="display: none;" />
                            <input type="file" id="profilePicture" accept="image/*" style="display: none;">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="firstName">First Name *</label>
                            <input type="text" id="firstName" required>
                        </div>
                        <div class="form-group">
                            <label for="lastName">Last Name *</label>
                            <input type="text" id="lastName" required>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="jobTitle">Job Title</label>
                            <input type="text" id="jobTitle" placeholder="e.g., Software Engineer">
                        </div>
                        <div class="form-group">
                            <label for="company">Company</label>
                            <input type="text" id="company" placeholder="e.g., Tech Corp">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="mobile">Mobile Number *</label>
                            <input type="tel" id="mobile" required placeholder="+1 234 567 8900">
                        </div>
                        <div class="form-group">
                            <label for="email">Email Address *</label>
                            <input type="email" id="email" required placeholder="john@example.com">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="website">Website</label>
                        <input type="url" id="website" placeholder="https://www.example.com">
                    </div>

                    <div class="form-group">
                        <label for="address">Address</label>
                        <textarea id="address" rows="3" placeholder="Street, City, State, ZIP Code"></textarea>
                    </div>

                    <h3><i class="fas fa-share-alt"></i> Social Media Links</h3>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="linkedin"><i class="fab fa-linkedin"></i> LinkedIn</label>
                            <input type="url" id="linkedin" placeholder="https://linkedin.com/in/username">
                        </div>
                        <div class="form-group">
                            <label for="twitter"><i class="fab fa-twitter"></i> Twitter</label>
                            <input type="url" id="twitter" placeholder="https://twitter.com/username">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="facebook"><i class="fab fa-facebook"></i> Facebook</label>
                            <input type="url" id="facebook" placeholder="https://facebook.com/username">
                        </div>
                        <div class="form-group">
                            <label for="instagram"><i class="fab fa-instagram"></i> Instagram</label>
                            <input type="url" id="instagram" placeholder="https://instagram.com/username">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="github"><i class="fab fa-github"></i> GitHub</label>
                            <input type="url" id="github" placeholder="https://github.com/username">
                        </div>
                        <div class="form-group">
                            <label for="youtube"><i class="fab fa-youtube"></i> YouTube</label>
                            <input type="url" id="youtube" placeholder="https://youtube.com/c/channel">
                        </div>
                    </div>

                    <button type="submit" class="generate-btn">
                        <i class="fas fa-qrcode"></i> Generate QR Code
                    </button>
                </form>
            </div>

            <div class="preview-section">
                <div class="card-preview" id="cardPreview">
                    <h3>Preview</h3>
                    <p>Fill the form to see your visiting card preview</p>
                </div>

                <div class="qr-section" id="qrSection" style="display: none;">
                    <h3>Your QR Code</h3>
                    <div class="qr-container">
                        <canvas id="qrcode"></canvas>
                    </div>
                    <div class="qr-actions">
                        <button id="downloadQR" class="download-btn">
                            <i class="fas fa-download"></i> Download QR Code
                        </button>
                        <button id="downloadVCard" class="download-btn secondary">
                            <i class="fas fa-address-card"></i> Download vCard
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
class VCardGenerator {
    constructor() {
        this.profileImageData = null;
        this.initializeEventListeners();
        this.setupFormValidation();
    }

    initializeEventListeners() {
        document.getElementById('vcardForm').addEventListener('submit', (e) => {
            e.preventDefault();
            this.generateVCard();
        });

        document.getElementById('uploadArea').addEventListener('click', () => {
            document.getElementById('profilePicture').click();
        });

        document.getElementById('profilePicture').addEventListener('change', (e) => {
            this.handleProfilePictureUpload(e);
        });

        const formInputs = document.querySelectorAll('#vcardForm input, #vcardForm textarea');
        formInputs.forEach(input => {
            input.addEventListener('input', () => {
                this.updatePreview();
            });
        });

        document.getElementById('downloadQR').addEventListener('click', () => {
            this.downloadQRCode();
        });

        document.getElementById('downloadVCard').addEventListener('click', () => {
            this.downloadVCardFile();
        });
    }

    setupFormValidation() {
        const mobileInput = document.getElementById('mobile');
        mobileInput.addEventListener('input', (e) => {
            this.validatePhoneNumber(e.target);
        });

        const emailInput = document.getElementById('email');
        emailInput.addEventListener('input', (e) => {
            this.validateEmail(e.target);
        });
    }

    validatePhoneNumber(input) {
        const phoneRegex = /^[\+]?[1-9][\d]{0,15}$/;
        const isValid = phoneRegex.test(input.value.replace(/\s/g, ''));
        
        if (input.value && !isValid) {
            input.setCustomValidity('Please enter a valid phone number');
        } else {
            input.setCustomValidity('');
        }
    }

    validateEmail(input) {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        const isValid = emailRegex.test(input.value);
        
        if (input.value && !isValid) {
            input.setCustomValidity('Please enter a valid email address');
        } else {
            input.setCustomValidity('');
        }
    }

    handleProfilePictureUpload(event) {
        const file = event.target.files[0];
        if (!file) return;

        if (!file.type.startsWith('image/')) {
            alert('Please select a valid image file (JPG, PNG, GIF)');
            return;
        }

        if (file.size > 5 * 1024 * 1024) {
            alert('File size must be less than 5MB');
            return;
        }

        const reader = new FileReader();
        reader.onload = (e) => {
            this.profileImageData = e.target.result;
            
            const preview = document.getElementById('profilePreview');
            const placeholder = document.querySelector('.upload-placeholder');
            
            preview.src = this.profileImageData;
            preview.style.display = 'block';
            placeholder.style.display = 'none';
            
            this.updatePreview();
        };
        reader.readAsDataURL(file);
    }

    getFormData() {
        return {
            firstName: document.getElementById('firstName').value.trim(),
            lastName: document.getElementById('lastName').value.trim(),
            jobTitle: document.getElementById('jobTitle').value.trim(),
            company: document.getElementById('company').value.trim(),
            mobile: document.getElementById('mobile').value.trim(),
            email: document.getElementById('email').value.trim(),
            website: document.getElementById('website').value.trim(),
            address: document.getElementById('address').value.trim(),
            linkedin: document.getElementById('linkedin').value.trim(),
            twitter: document.getElementById('twitter').value.trim(),
            facebook: document.getElementById('facebook').value.trim(),
            instagram: document.getElementById('instagram').value.trim(),
            github: document.getElementById('github').value.trim(),
            youtube: document.getElementById('youtube').value.trim(),
            profileImage: this.profileImageData
        };
    }

    updatePreview() {
        const data = this.getFormData();
        const preview = document.getElementById('cardPreview');
        
        if (!data.firstName && !data.lastName) {
            preview.innerHTML = `
                <h3>Preview</h3>
                <p>Fill the form to see your visiting card preview</p>
            `;
            return;
        }

        const fullName = `${data.firstName} ${data.lastName}`.trim();
        const jobCompany = [data.jobTitle, data.company].filter(Boolean).join(' at ');
        
        const socialLinks = this.generateSocialLinksHTML(data);
        
        preview.innerHTML = `
            <h3>Visiting Card Preview</h3>
            <div class="card-display">
                <div class="card-header">
                    ${data.profileImage ? `<img src="${data.profileImage}" alt="Profile" class="card-avatar">` : ''}
                    <div class="card-info">
                        <h4>${fullName}</h4>
                        ${jobCompany ? `<p>${jobCompany}</p>` : ''}
                    </div>
                </div>
                <div class="card-details">
                    ${data.mobile ? `<div class="card-detail-item"><i class="fas fa-phone"></i><span>${data.mobile}</span></div>` : ''}
                    ${data.email ? `<div class="card-detail-item"><i class="fas fa-envelope"></i><span>${data.email}</span></div>` : ''}
                    ${data.website ? `<div class="card-detail-item"><i class="fas fa-globe"></i><span>${data.website}</span></div>` : ''}
                    ${data.address ? `<div class="card-detail-item"><i class="fas fa-map-marker-alt"></i><span>${data.address}</span></div>` : ''}
                </div>
                ${socialLinks ? `<div class="social-links">${socialLinks}</div>` : ''}
            </div>
        `;
    }

    generateSocialLinksHTML(data) {
        const socialPlatforms = [
            { key: 'linkedin', icon: 'fab fa-linkedin', class: 'linkedin' },
            { key: 'twitter', icon: 'fab fa-twitter', class: 'twitter' },
            { key: 'facebook', icon: 'fab fa-facebook', class: 'facebook' },
            { key: 'instagram', icon: 'fab fa-instagram', class: 'instagram' },
            { key: 'github', icon: 'fab fa-github', class: 'github' },
            { key: 'youtube', icon: 'fab fa-youtube', class: 'youtube' }
        ];

        const links = socialPlatforms
            .filter(platform => data[platform.key])
            .map(platform => `
                <a href="${data[platform.key]}" target="_blank" class="social-link ${platform.class}">
                    <i class="${platform.icon}"></i>
                </a>
            `);

        return links.length > 0 ? links.join('') : '';
    }

    generateVCardData(data) {
        const fullName = `${data.firstName} ${data.lastName}`.trim();
        
        let vcard = 'BEGIN:VCARD\n';
        vcard += 'VERSION:3.0\n';
        vcard += `FN:${fullName}\n`;
        vcard += `N:${data.lastName};${data.firstName};;;\n`;
        
        if (data.jobTitle) {
            vcard += `TITLE:${data.jobTitle}\n`;
        }
        
        if (data.company) {
            vcard += `ORG:${data.company}\n`;
        }
        
        if (data.mobile) {
            vcard += `TEL;TYPE=CELL:${data.mobile}\n`;
        }
        
        if (data.email) {
            vcard += `EMAIL:${data.email}\n`;
        }
        
        if (data.website) {
            vcard += `URL:${data.website}\n`;
        }
        
        if (data.address) {
            vcard += `ADR:;;${data.address};;;;\n`;
        }

        if (data.linkedin) vcard += `URL:${data.linkedin}\n`;
        if (data.twitter) vcard += `URL:${data.twitter}\n`;
        if (data.facebook) vcard += `URL:${data.facebook}\n`;
        if (data.instagram) vcard += `URL:${data.instagram}\n`;
        if (data.github) vcard += `URL:${data.github}\n`;
        if (data.youtube) vcard += `URL:${data.youtube}\n`;
        
        if (data.profileImage) {
            const base64Data = data.profileImage.split(',')[1];
            vcard += `PHOTO;ENCODING=BASE64;TYPE=JPEG:${base64Data}\n`;
        }
        
        vcard += 'END:VCARD';
        
        return vcard;
    }

    async generateVCard() {
        const form = document.getElementById('vcardForm');
        if (!form.checkValidity()) {
            form.reportValidity();
            return;
        }

        const data = this.getFormData();
        const vCardData = this.generateVCardData(data);
        
        const generateBtn = document.querySelector('.generate-btn');
        const originalHTML = generateBtn.innerHTML;
        generateBtn.innerHTML = '<div class="loading"></div> Generating...';
        generateBtn.disabled = true;

        try {
            await this.generateQRCode(vCardData);
            
            document.getElementById('qrSection').style.display = 'block';
            
            document.getElementById('qrSection').scrollIntoView({ 
                behavior: 'smooth', 
                block: 'start' 
            });
            
        } catch (error) {
            console.error('Error generating QR code:', error);
            alert('Error generating QR code. Please try again.');
        } finally {
            generateBtn.innerHTML = originalHTML;
            generateBtn.disabled = false;
        }
    }

    generateQRCode(vCardData) {
        return new Promise((resolve, reject) => {
            const canvas = document.getElementById('qrcode');
            
            QRCode.toCanvas(canvas, vCardData, {
                width: 300,
                height: 300,
                margin: 2,
                color: {
                    dark: '#000000',
                    light: '#FFFFFF'
                },
                errorCorrectionLevel: 'M'
            }, (error) => {
                if (error) {
                    reject(error);
                } else {
                    resolve();
                }
            });
        });
    }

    downloadQRCode() {
        const canvas = document.getElementById('qrcode');
        const link = document.createElement('a');
        link.download = 'vcard-qr-code.png';
        link.href = canvas.toDataURL();
        link.click();
    }

    downloadVCardFile() {
        const data = this.getFormData();
        const vCardData = this.generateVCardData(data);
        
        const blob = new Blob([vCardData], { type: 'text/vcard' });
        const link = document.createElement('a');
        link.href = URL.createObjectURL(blob);
        link.download = `${data.firstName}_${data.lastName}_vcard.vcf`;
        link.click();
        
        URL.revokeObjectURL(link.href);
    }
}

document.addEventListener('DOMContentLoaded', () => {
    new VCardGenerator();
});

document.addEventListener('DOMContentLoaded', () => {
    const uploadArea = document.getElementById('uploadArea');
    
    ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
        uploadArea.addEventListener(eventName, preventDefaults, false);
    });
    
    function preventDefaults(e) {
        e.preventDefault();
        e.stopPropagation();
    }
    
    ['dragenter', 'dragover'].forEach(eventName => {
        uploadArea.addEventListener(eventName, highlight, false);
    });
    
    ['dragleave', 'drop'].forEach(eventName => {
        uploadArea.addEventListener(eventName, unhighlight, false);
    });
    
    function highlight() {
        uploadArea.style.borderColor = '#667eea';
        uploadArea.style.background = '#f0f4ff';
    }
    
    function unhighlight() {
        uploadArea.style.borderColor = '#cbd5e0';
        uploadArea.style.background = '#f8fafc';
    }
    
    uploadArea.addEventListener('drop', handleDrop, false);
    
    function handleDrop(e) {
        const dt = e.dataTransfer;
        const files = dt.files;
        
        if (files.length > 0) {
            const fileInput = document.getElementById('profilePicture');
            fileInput.files = files;
            fileInput.dispatchEvent(new Event('change'));
        }
    }
});
    </script>
</body>
</html>